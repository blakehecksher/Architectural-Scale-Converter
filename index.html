<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Architectural Scale Factor Matrix</title>
    <style>
        :root {
            --paper: #FFFCF0;
            --base-50: #F2F0E5;
            --base-100: #E6E4D9;
            --base-150: #DAD8CE;
            --base-200: #CECDC3;
            --base-300: #B7B5AC;
            --base-400: #9F9D96;
            --base-500: #878580;
            --base-600: #6F6E69;
            --base-700: #575653;
            --base-800: #403E3C;
            --base-900: #282726;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
            margin: 0 auto;
            max-width: 1200px;
            padding: 24px;
            background: var(--paper);
            color: var(--base-900);
            line-height: 1.5;
        }
        h1 {
            text-align: center;
            margin-bottom: 24px;
            font-weight: 600;
        }
        .table-wrapper { overflow-x: auto; border: 1px solid var(--base-150); border-radius: 8px; }
        table { width: 100%; border-collapse: collapse; min-width: 800px; }
        th, td { padding: 8px 12px; border: 1px solid var(--base-200); text-align: center; white-space: nowrap; }
        th { background: var(--base-100); font-weight: 500; color: var(--base-800); }
        td { transition: background 0.15s ease-in-out; }
        td:hover { cursor: pointer; background: var(--base-50); }
        th.highlight { background: var(--base-300) !important; }
        /* toggle button */
        .toggle-btn { appearance: none; border: 1px solid var(--base-300); background: var(--base-100); padding: 4px 10px; font-size: 14px; border-radius: 4px; cursor: pointer; }
        .toggle-btn:hover { background: var(--base-150); }
    </style>
</head>
<body>
    <h1>Architectural Scale Factor Matrix</h1>

    <div class="table-wrapper">
        <table id="scaleMatrix"></table>
    </div>

    <footer style="text-align:center; margin-top:32px; font-size:14px; color:var(--base-500);">
        © <span id="year"></span> Architectural Scale Converter
    </footer>

    <script>
        const commonScales = [
            { label: "1/32\" = 1'-0\"", ratio: 1/32/12 },
            { label: "1/16\" = 1'-0\"", ratio: 1/16/12 },
            { label: "1/8\" = 1'-0\"",  ratio: 1/8/12  },
            { label: "3/16\" = 1'-0\"", ratio: 3/16/12 },
            { label: "1/4\" = 1'-0\"",  ratio: 1/4/12  },
            { label: "3/8\" = 1'-0\"",  ratio: 3/8/12  },
            { label: "1/2\" = 1'-0\"",  ratio: 1/2/12  },
            { label: "3/4\" = 1'-0\"",  ratio: 3/4/12  },
            { label: "1\" = 1'-0\"",    ratio: 1/12     },
            { label: "1-1/2\" = 1'-0\"", ratio: 1.5/12   },
            { label: "3\" = 1'-0\"",     ratio: 3/12     },
            { label: "Half Size (1:2)",    ratio: 0.5      },
            { label: "Full Size (1:1)",    ratio: 1        }
        ].sort((a,b)=>a.ratio-b.ratio);

        const table = document.getElementById('scaleMatrix');
        document.getElementById('year').textContent = new Date().getFullYear();
        let showPercent = false;

        buildMatrix();
        attachHover();
        document.getElementById('toggleBtn').addEventListener('click', toggleDisplay);

        function buildMatrix(){
            const thead = document.createElement('thead');
            const headRow = document.createElement('tr');

            // top‑left cell with toggle button
            const corner = document.createElement('th');
            const btn = document.createElement('button');
            btn.id = 'toggleBtn';
            btn.className = 'toggle-btn';
            btn.textContent = '%';
            corner.appendChild(btn);
            headRow.appendChild(corner);

            commonScales.forEach(s=>{
                const th = document.createElement('th');
                th.textContent = s.label;
                headRow.appendChild(th);
            });
            thead.appendChild(headRow);
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            commonScales.forEach((from, rIdx)=>{
                const tr = document.createElement('tr');
                const rowHeader = document.createElement('th');
                rowHeader.textContent = from.label;
                tr.appendChild(rowHeader);
                commonScales.forEach((to,cIdx)=>{
                    const td = document.createElement('td');
                    if(rIdx===cIdx){
                        td.textContent='—';
                        td.style.color='var(--base-500)';
                    }else{
                        const factor = to.ratio / from.ratio;
                        td.dataset.factor = factor;
                        td.dataset.percent = (factor*100).toFixed(2);
                        td.textContent = factor.toFixed(4)+'×';
                    }
                    tr.appendChild(td);
                });
                tbody.appendChild(tr);
            });
            table.appendChild(tbody);
        }

        function toggleDisplay(){
            showPercent = !showPercent;
            const btn = document.getElementById('toggleBtn');
            btn.textContent = showPercent ? '×' : '%';
            table.querySelectorAll('tbody td').forEach(td=>{
                if(!td.dataset.factor) return;
                td.textContent = showPercent ? td.dataset.percent+'%' : (+td.dataset.factor).toFixed(4)+'×';
            });
        }

        function attachHover(){
            table.addEventListener('mouseover',e=>{
                const cell = e.target;
                if(cell.tagName!== 'TD') return;
                clearHighlights();
                const rowHeader = cell.parentElement.querySelector('th');
                const colHeader = table.tHead.rows[0].cells[cell.cellIndex];
                rowHeader.classList.add('highlight');
                colHeader.classList.add('highlight');
            });
            table.addEventListener('mouseout',e=>{
                if(e.target.tagName==='TD') clearHighlights();
            });
        }
        function clearHighlights(){
            table.querySelectorAll('th.highlight').forEach(th=>th.classList.remove('highlight'));
        }
    </script>
</body>
</html>
